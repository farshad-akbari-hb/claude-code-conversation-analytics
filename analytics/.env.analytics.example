# =============================================================================
# Claude Analytics Platform Configuration
# =============================================================================
# Copy this file to .env.analytics and customize for your environment
# =============================================================================

# -----------------------------------------------------------------------------
# MongoDB Source Configuration
# -----------------------------------------------------------------------------
# Connection URI for MongoDB (source of conversation logs)
MONGO_URI=mongodb://host.docker.internal:27017

# Database containing conversation logs
MONGO_DB=claude_logs

# Collection with conversation entries
MONGO_COLLECTION=conversations

# -----------------------------------------------------------------------------
# DuckDB Target Configuration
# -----------------------------------------------------------------------------
# Path to DuckDB database file
DUCKDB_PATH=/duckdb/analytics.db

# Number of threads for DuckDB queries
DUCKDB_THREADS=4

# -----------------------------------------------------------------------------
# Apache Iceberg Storage Configuration
# -----------------------------------------------------------------------------
# Base directory for all data files
DATA_DIR=/data

# Iceberg warehouse directory
ICEBERG_WAREHOUSE_PATH=/data/iceberg

# Iceberg catalog name
ICEBERG_CATALOG_NAME=default

# Iceberg namespace
ICEBERG_NAMESPACE=analytics

# Iceberg table name
ICEBERG_TABLE_NAME=conversations

# Directory for failed records (dead letter queue)
DEAD_LETTER_DIR=/data/dead_letter

# -----------------------------------------------------------------------------
# Pipeline Settings
# -----------------------------------------------------------------------------
# Number of documents to process per batch
BATCH_SIZE=10000

# Enable full historical backfill on first run
BACKFILL_ALL_HISTORICAL=true

# High water mark file for tracking last sync timestamp
HIGH_WATER_MARK_FILE=/data/.high_water_mark

# -----------------------------------------------------------------------------
# Prefect Orchestration (optional, for scheduled runs)
# -----------------------------------------------------------------------------
# Prefect API URL (leave empty for local execution without server)
PREFECT_API_URL=

# Work pool name for Prefect workers
PREFECT_WORK_POOL=analytics-pool

# -----------------------------------------------------------------------------
# dbt Configuration
# -----------------------------------------------------------------------------
# dbt project directory
DBT_PROJECT_DIR=/app/dbt

# dbt profiles directory
DBT_PROFILES_DIR=/app/dbt

# dbt target environment (dev or prod)
DBT_TARGET=dev

# -----------------------------------------------------------------------------
# Great Expectations Configuration
# -----------------------------------------------------------------------------
# Great Expectations project directory
GE_PROJECT_DIR=/app/great_expectations

# Enable/disable data quality checks
GE_ENABLED=true

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json or text
LOG_FORMAT=text

# -----------------------------------------------------------------------------
# Alerting (optional)
# -----------------------------------------------------------------------------
# Slack webhook URL for alerts
SLACK_WEBHOOK_URL=

# Email address for alerts
ALERT_EMAIL=
